<!DOCTYPE html>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.css" media="screen" charset="utf-8">
  <style>
    body {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .browser text {
      text-anchor: end;
    }
    #chart4 { height: 300px; }
    </style>
<body>
  <div id="chart4"><svg></svg></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.js"></script>-->
  <script src="/NVD3/build/nv.d3.js"></script>

  <script>
    var stackData = [
        {
          "key" : "Development" ,
          "values" : [
            [ "01102011" , 56] ,
            [ "15102011" , 54] ,
            [ "01112011" , 52] ,
            [ "15112011" , 50] ,
            [ "01122011" , 48] ,
            [ "15122011" , 46] ,
            [ "01012012" , 44] ,
            [ "15012012" , 42] ,
            [ "01022012" , 40] ,
            [ "15022012" , 38] ,
            [ "01032012" , 36] ,
            [ "15032012" , 32] ,
            [ "01042012" , 28] ,
            [ "15042012" , 20] ,
            [ "01052012" , 13] ,
            [ "15052012" , 8 ] ,
            [ "01062012" , 4 ] ,
            [ "15062012" , 4 ] ,
            [ "01072012" , 1 ] ,
            [ "15072012" , 0 ] ,
            [ "01082012" , 0 ] ,
            [ "15082012" , 0 ] ,
            [ "01092012" , 0 ] ,
            [ "15092012" , 0 ] ,
            [ "01102012" , 0 ] ,
            [ "15102012" , 0 ] ,
            [ "01112012" , 0 ] ,
            [ "15112012" , 0 ] ,
            [ "01122012" , 0 ] ,
            [ "15122012" , 0 ] ,
          ]
        },
        {
          "key" : "Test" ,
          "values" : [
            [ "01102011" , 0] ,
            [ "15102011" , 2] ,
            [ "01112011" , 4] ,
            [ "15112011" , 6] ,
            [ "01122011" , 8] ,
            [ "15122011" , 10] ,
            [ "01012012" , 12] ,
            [ "15012012" , 14] ,
            [ "01022012" , 16] ,
            [ "15022012" , 16] ,
            [ "01032012" , 16] ,
            [ "15032012" , 18] ,
            [ "01042012" , 14] ,
            [ "15042012" , 18] ,
            [ "01052012" , 25] ,
            [ "15052012" , 20] ,
            [ "01062012" , 20] ,
            [ "15062012" , 18] ,
            [ "01072012" , 18] ,
            [ "15072012" , 14] ,
            [ "01082012" , 10] ,
            [ "15082012" , 3] ,
            [ "01092012" , 0] ,
            [ "15092012" , 0] ,
            [ "01102012" , 0] ,
            [ "15102012" , 0] ,
            [ "01112012" , 0] ,
            [ "15112012" , 0] ,
            [ "01122012" , 0] ,
            [ "15122012" , 0] ,
          ]
        },
        {
          "key" : "OPS Turn-up" ,
          "values" : [
            [ "01102011" , 0] ,
            [ "15102011" , 0] ,
            [ "01112011" , 0] ,
            [ "15112011" , 0] ,
            [ "01122011" , 0] ,
            [ "15122011" , 0] ,
            [ "01012012" , 0] ,
            [ "15012012" , 0] ,
            [ "01022012" , 0] ,
            [ "15022012" , 2] ,
            [ "01032012" , 2] ,
            [ "15032012" , 4] ,
            [ "01042012" , 6] ,
            [ "15042012" , 10] ,
            [ "01052012" , 7] ,
            [ "15052012" , 13] ,
            [ "01062012" , 14] ,
            [ "15062012" , 13] ,
            [ "01072012" , 16] ,
            [ "15072012" , 18] ,
            [ "01082012" , 20] ,
            [ "15082012" , 16] ,
            [ "01092012" , 16] ,
            [ "15092012" , 13] ,
            [ "01102012" , 10] ,
            [ "15102012" , 7] ,
            [ "01112012" , 10] ,
            [ "15112012" , 7] ,
            [ "01122012" , 10] ,
            [ "15122012" , 7] ,
          ]
        },
        {
          "key" : "OPS Cutover" ,
          "values" : [
            [ "01102011" , 0] ,
            [ "15102011" , 0] ,
            [ "01112011" , 0] ,
            [ "15112011" , 0] ,
            [ "01122011" , 0] ,
            [ "15122011" , 0] ,
            [ "01012012" , 0] ,
            [ "15012012" , 0 ] ,
            [ "01022012" , 0 ] ,
            [ "15022012" , 0 ] ,
            [ "01032012" , 	2] ,
            [ "15032012" , 	2] ,
            [ "01042012" , 	8] ,
            [ "15042012" , 	4] ,
            [ "01052012" , 	7] ,
            [ "15052012" , 	9] ,
            [ "01062012" , 12] ,
            [ "15062012" , 14] ,
            [ "01072012" , 13] ,
            [ "15072012" , 14] ,
            [ "01082012" , 15] ,
            [ "15082012" , 23] ,
            [ "01092012" , 26] ,
            [ "15092012" , 23] ,
            [ "01102012" , 24] ,
            [ "15102012" , 21] ,
            [ "01112012" , 24] ,
            [ "15112012" , 21] ,
            [ "01122012" , 24] ,
            [ "15122012" , 21] ,
          ]
        },
        {
          "key" : "ASDI Decommissioned" ,
          "values" : [
            [ "01102011" , 0] ,
            [ "15102011" , 0] ,
            [ "01112011" , 0] ,
            [ "15112011" , 0] ,
            [ "01122011" , 0] ,
            [ "15122011" , 0] ,
            [ "01012012" , 0] ,
            [ "15012012" , 0] ,
            [ "01022012" , 0] ,
            [ "15022012" , 0 ] ,
            [ "01032012" , 	0] ,
            [ "15032012" , 	0] ,
            [ "01042012" , 	0] ,
            [ "15042012" , 	4] ,
            [ "01052012" , 	4] ,
            [ "15052012" , 	6] ,
            [ "01062012" , 	6] ,
            [ "15062012" , 	7] ,
            [ "01072012" , 	8] ,
            [ "15072012" , 10] ,
            [ "01082012" , 11] ,
            [ "15082012" , 14] ,
            [ "01092012" , 14] ,
            [ "15092012" , 20] ,
            [ "01102012" , 22] ,
            [ "15102012" , 28] ,
            [ "01112012" , 22] ,
            [ "15112012" , 28] ,
            [ "01122012" , 22] ,
            [ "15122012" , 28] ,
          ]
        },
    ];
  </script>
  <script id="NVD3AreaChart">
      var parseIt = d3.time.format("%d%m%Y").parse;

      stackData.forEach(function(d,i) {
        d.values.forEach(function(val, int) {
          val[0] = parseIt(val[0]);
        });
      });

      var colors = d3.scale.category20();

      var chart;
      nv.addGraph(function() {
          chart = nv.models.stackedAreaChart()
              .margin({top: 30, right: 40, bottom: 80, left: 40})
              .useInteractiveGuideline(true)
              .x(function(d) { return d[0] })
              .y(function(d) { return d[1] })
              .showControls(false)
              .duration(300);

          chart.xAxis.tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });
          chart.yAxis.tickFormat(d3.format(',f'));

          chart.stacked.dispatch.on("areaClick", function(d){
            console.log(d3.select('.x-value')[0][0].innerHTML);
          });

          d3.select('#chart4 svg')
              .datum(stackData)
              .transition().duration(1000)
              .call(chart);

          nv.utils.windowResize(chart.update);
          return chart;
      });
  </script>
</body>
</html>
